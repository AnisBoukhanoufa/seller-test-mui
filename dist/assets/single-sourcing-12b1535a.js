import{bN as $,j as e,c as p,aa as K,r as u,t as r,bO as c,ab as v,u as Y,ao as R,b as V}from"./index-335be6bc.js";import{h as g}from"./moment-fbc5633a.js";import{S as A}from"./status-cell-abbf33fa.js";import{S as B,a as _,b as E}from"./Stepper-66417976.js";import"./useSlot-06d6b379.js";const C=a=>a,F=()=>{let a=C;return{configure(t){a=t},generate(t){return a(t)},reset(){a=C}}},O=F(),w=O,T={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function q(a,t,s="Mui"){const n=T[t];return n?`${s}-${n}`:`${w.generate(a)}-${t}`}function H(a,t,s="Mui"){const n={};return t.forEach(l=>{n[l]=q(a,l,s)}),n}const G=H("MuiBox",["root"]),P=G,W=$({defaultClassName:P.root,generateClassName:w.generate}),N=W;const L=({color:a,size:t=17,borderColor:s="#D3D3D3"})=>{const n={display:"inline-block",width:`${t}px`,height:`${t}px`,borderRadius:"50%",border:`0.5px solid ${s}`,backgroundColor:a};return e.jsx("span",{style:n})},U=({isSelected:a,onSelect:t,cardDetail:s})=>{var n,l,o,d,m,x,j,i;return e.jsxs("div",{onClick:t,className:`sourcing-product ${a?"selected":""}`,children:[e.jsx("div",{className:"product-details",children:e.jsxs("p",{className:"product-name",children:[(l=(n=s==null?void 0:s.productId)==null?void 0:n.productId)==null?void 0:l.name,((o=s==null?void 0:s.productId)==null?void 0:o.variations)&&e.jsxs(e.Fragment,{children:[Object.entries((d=s==null?void 0:s.productId)==null?void 0:d.variations).map(([h,y])=>e.jsxs(e.Fragment,{children:[y," "]})),((x=(m=s==null?void 0:s.productId)==null?void 0:m.variations)==null?void 0:x.color)&&e.jsx(L,{color:(i=(j=s==null?void 0:s.productId)==null?void 0:j.variations)==null?void 0:i.color})]})]})}),e.jsx(A,{status:s==null?void 0:s.currentStatus})]})},J=({subProducts:a,setSelectedCardId:t,selectedCardId:s})=>{const n=l=>{t(l)};return e.jsx(e.Fragment,{children:a==null?void 0:a.map((l,o)=>e.jsx(U,{isSelected:s===l._id,cardDetail:l,onSelect:()=>n(l._id)},o))})},Q=p(e.jsx("path",{d:"M11 17h2v-1h1c.55 0 1-.45 1-1v-3c0-.55-.45-1-1-1h-3v-1h4V8h-2V7h-2v1h-1c-.55 0-1 .45-1 1v3c0 .55.45 1 1 1h3v1H9v2h2zm9-13H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2m0 14H4V6h16z"}),"LocalAtm"),X=p(e.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search"),k=p(e.jsx("path",{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m13.5-9 1.96 2.5H17V9.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"LocalShipping"),f=p(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle"),b=p(e.jsx("path",{d:"m23 12-2.44-2.78.34-3.68-3.61-.82-1.89-3.18L12 3 8.6 1.54 6.71 4.72l-3.61.81.34 3.68L1 12l2.44 2.78-.34 3.69 3.61.82 1.89 3.18L12 21l3.4 1.46 1.89-3.18 3.61-.82-.34-3.68zm-10 5h-2v-2h2zm0-4h-2V7h2z"}),"NewReleases"),S=p(e.jsx("path",{d:"m18 7-1.41-1.41-6.34 6.34 1.41 1.41zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12zM.41 13.41 6 19l1.41-1.41L1.83 12z"}),"DoneAll"),Z=p(e.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel"),D=K("div")(({theme:a,status:t})=>({display:"flex",alignItems:"center",justifyContent:"center",width:36,height:36,borderRadius:"50%",backgroundColor:t==="rejected"?"red":t==="active"?"var(--color-main)":t==="completed"?"green":"gray",color:"#fff"})),ee=K(B)(({theme:a,status:t})=>({...t==="rejected"&&{color:"red"},...t==="active"&&{color:"var(--color-main)"},...t==="completed"&&{color:"green"}})),se=({statusData:a})=>{var j;const{sourcingInfo:t}=u.useContext(z),s=[{label:r(c.new),key:c.new,icon:e.jsx(b,{})},{label:r(c.search),key:c.search,icon:e.jsx(X,{})},{label:r(c.payed),key:c.payed,icon:e.jsx(Q,{})},{label:r(c.received),key:c.received,icon:e.jsx(f,{})},{label:r(c.shipping),key:c.shipping,icon:e.jsx(k,{})},{label:r(c.delivered),key:c.delivered,icon:e.jsx(S,{})}];let n;switch(t==null?void 0:t.category){case 350:n=[{label:r(c.new),key:c.new,icon:e.jsx(b,{})},{label:r(c.delivered),key:c.delivered,icon:e.jsx(S,{})}];break;case 351:n=[{label:r(c.new),key:c.new,icon:e.jsx(b,{})},{label:r(c.received),key:c.received,icon:e.jsx(f,{})},{label:r(c.shipping),key:c.shipping,icon:e.jsx(k,{})},{label:r(c.delivered),key:c.delivered,icon:e.jsx(S,{})}];break;case 352:n=s;break;default:n=s}const l=a.findIndex(i=>i.status===c.rejected)-1,o=n.map(i=>{const h=a==null?void 0:a.find(y=>y.status===i.key);return{label:i.label,date:h?g(h.createdAt).format("YYYY-MM-DD"):"",icon:i.icon}});let d;o.length===n.length&&((j=o[n.length-1])==null?void 0:j.date)!==""?d=n.length:d=o.findIndex(i=>i.date==="")-1;const m=[...o];l!==void 0&&l>=0&&l<m.length&&m.splice(l+1,0,{label:"Rejected",date:`${g(a[l+1].createdAt).format("YYYY-MM-DD")}`,icon:e.jsx(Z,{})});const x=({icon:i,active:h,completed:y,label:M})=>{const I=M==="Rejected"?"rejected":h?"active":y?"completed":"default";return e.jsx(D,{status:I,children:i})};return e.jsx(_,{alternativeLabel:!0,activeStep:d,children:m.map((i,h)=>e.jsx(ee,{completed:h<d&&i.label!=="Rejected",status:i.label==="Rejected"?"rejected":h===d?"active":h<d?"completed":"",children:e.jsxs(E,{StepIconComponent:()=>x({icon:i.icon,active:h===d,completed:h<d,label:i.label}),children:[e.jsx(v,{variant:"body2",children:i.label}),e.jsx(v,{variant:"caption",color:"textSecondary",children:i.date})]})},h))})},ae=({product:a})=>{var t,s,n,l,o,d,m,x;return a?e.jsx(e.Fragment,{children:e.jsxs(N,{className:"details-content",children:[e.jsxs(v,{className:"details-title",variant:"h5",gutterBottom:!0,children:[(s=(t=a==null?void 0:a.productId)==null?void 0:t.productId)==null?void 0:s.name," ",((n=a==null?void 0:a.productId)==null?void 0:n.variations)&&e.jsxs(e.Fragment,{children:[Object.entries((l=a==null?void 0:a.productId)==null?void 0:l.variations).map(([j,i],h)=>e.jsxs("span",{children:[i," "]},h)),((d=(o=a==null?void 0:a.productId)==null?void 0:o.variations)==null?void 0:d.color)&&e.jsx(L,{color:(x=(m=a==null?void 0:a.productId)==null?void 0:m.variations)==null?void 0:x.color,size:20})]})]}),e.jsxs(N,{className:"details",display:"flex",justifyContent:"space-between",children:[e.jsxs(N,{className:"left",children:[e.jsxs(v,{className:"details-sub-title",variant:"h6",gutterBottom:!0,children:[r("details")," :"]}),e.jsxs(v,{className:"key-value",variant:"body1",children:[e.jsxs("span",{className:"capitalize",children:[r("quantity")," :"]}),e.jsxs("span",{children:[" ",a.quantity]})]}),e.jsxs(v,{className:"key-value",variant:"body1",children:[e.jsxs("span",{className:"capitalize",children:[r("number of boxes")," :"]}),e.jsxs("span",{children:[" ",a.numberOfCartoons]})]}),e.jsxs(v,{className:"key-value",variant:"body1",children:[e.jsxs("span",{className:"capitalize",children:[r("weight")," :"]}),e.jsxs("span",{children:[a.weight,"Kg"]})]}),e.jsxs(v,{className:"key-value",variant:"body1",children:[e.jsxs("span",{className:"capitalize",children:[r("volume")," :"]}),e.jsxs("span",{children:[a.volume," CBM"]})]})]}),e.jsxs(N,{className:"right",flex:1,ml:2,children:[e.jsxs(v,{className:"details-sub-title",variant:"div",gutterBottom:!0,children:[r("status")," :"," ",e.jsx("div",{className:` cellWithStatus ${r(a.status[a.status.length-1].status,{lng:"en"})}`,children:r(a.status[a.status.length-1].status)})]}),e.jsx(N,{className:"status-tracker",children:e.jsx(se,{statusData:a.status})})]})]})]})}):null},z=u.createContext(null),re=()=>{var m,x;const t=Y().pathname.split("/")[2],[s,n]=u.useState({});u.useEffect(()=>{(async()=>{const i=await V.get(`/sourcing/single/${t}`);n(i.data._doc)})()},[]);const{t:l}=R(),[o,d]=u.useState(null);return u.useEffect(()=>{s._id&&d(s==null?void 0:s.products[0]._id)},[s._id]),e.jsx(z.Provider,{value:{sourcingInfo:s,setSourcingInfo:n},children:e.jsx("div",{className:"singleSourcing",children:e.jsx("div",{className:"singleContainer overflowPreventerFlexbox",children:e.jsx("div",{className:"overflowPreventerContainer",children:e.jsxs("div",{className:"overflowPreventer",children:[e.jsxs("div",{className:"top",children:[e.jsxs("div",{className:"left",children:[e.jsx("div",{className:"headerInfoContainer",children:e.jsx("div",{className:"headerInfo sourcing",children:e.jsxs("div",{className:"details",children:[e.jsxs("div",{className:"detailItem",children:[e.jsxs("span",{className:"itemKey",children:[l("id")," :"]}),e.jsx("span",{className:"valueKey valueKeyId",children:s==null?void 0:s.id})]}),e.jsxs("div",{className:"detailItem",children:[e.jsxs("span",{className:"itemKey",children:[l("created at")," :"]}),e.jsx("span",{className:"valueKey",children:g(s==null?void 0:s.createdAt).format("DD/MM/YYYY hh:mm A")})]})]})})}),e.jsx("div",{className:"item",children:e.jsxs("div",{className:"details",children:[e.jsxs("div",{className:"cardTitle",children:[e.jsx("span",{className:"valueKey",children:l("sourcing info")}),e.jsx("div",{className:"separator"})]}),e.jsxs("div",{className:"detailItem",children:[e.jsxs("span",{className:"itemKey",children:[l("seller")," :"]}),e.jsx("span",{className:"valueKey",children:(m=s==null?void 0:s.sellerId)==null?void 0:m.username})]}),e.jsxs("div",{className:"detailItem",children:[e.jsxs("span",{className:"itemKey",children:[l("type")," :"]}),e.jsx("span",{className:"valueKey sourcing-category",children:l(s==null?void 0:s.category)}),e.jsx("span",{className:`valueKey cellWithStatus ${l(s==null?void 0:s.type,{lng:"en"})}`,children:l(s==null?void 0:s.type)})]}),e.jsxs("div",{className:"detailItem",children:[e.jsxs("span",{className:"itemKey",children:[l("from")," :"]}),e.jsx("span",{className:"valueKey",children:s==null?void 0:s.sourceCountry})]}),e.jsxs("div",{className:"detailItem",children:[e.jsxs("span",{className:"itemKey",children:[l("To")," :"]}),e.jsx("span",{className:"valueKey",children:l(s==null?void 0:s.destinationCountry)})]}),e.jsxs("div",{className:"detailItem",children:[e.jsxs("span",{className:"itemKey",children:[l("status")," :"]}),e.jsx("span",{className:`valueKey cellWithStatus ${l(s==null?void 0:s.currentStatus,{lng:"en"})}`,children:l(s==null?void 0:s.currentStatus)})]}),e.jsxs("div",{className:"detailItem",children:[e.jsxs("span",{className:"itemKey",children:[l("description")," :"]}),s!=null&&s.description?e.jsx("span",{className:"valueKey",children:s==null?void 0:s.description}):e.jsx("span",{className:"valueKey",children:l("none")})]})]})})]}),e.jsx("div",{className:"right",children:e.jsx("div",{className:"cards-container",children:e.jsx(J,{setSelectedCardId:d,selectedCardId:o,subProducts:s.products})})})]}),e.jsx("div",{className:"bottom-container",children:e.jsx("div",{className:"bottom",children:e.jsx(ae,{product:(x=s.products)==null?void 0:x.filter(j=>j._id===o)[0]})})})]})})})})})};export{z as SourcingContext,re as default};
