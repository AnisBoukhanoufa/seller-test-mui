import{r as p,a8 as N,j as e,T as b,aT as f,t as d,aK as S,E as y}from"./index-335be6bc.js";import{I as A,u as D,a as O,b as W,c as B,d as T,O as k,W as I,e as M}from"./import-excel-dialog-6a39353d.js";import{D as F}from"./drop-down-order-type-c0d45b22.js";import{F as P}from"./filter-button-group-69656d3d.js";import{S as L,u as U}from"./use-query-filter-82542176.js";import{q as $}from"./functions-6046b92c.js";import{b as G,c as u,d as R}from"./order-affiliate-calls-259a0150.js";import{M as q}from"./TextField-e3426f14.js";import{M as x}from"./MenuItem-ae06aebb.js";import{L as z}from"./Link-f99010b1.js";import{u as K}from"./useDispatch-5616ae48.js";import{S as _}from"./status-cell-abbf33fa.js";import"./DataGrid-b5ad00e6.js";import"./Divider-88aee12a.js";import"./Autocomplete-7da48e1d.js";import"./Close-a8700400.js";import"./useSlot-06d6b379.js";import"./Popper-6a651f11.js";import"./Grow-32d2c9c3.js";import"./Portal-29f66c29.js";import"./Paper-7bffdec0.js";import"./useControlled-35363894.js";import"./ClickAwayListener-9b9a333f.js";import"./List-429b0059.js";import"./ListItemText-666b43be.js";import"./listItemTextClasses-c15af42f.js";import"./Checkbox-863386b3.js";import"./SwitchBase-6ca860c4.js";import"./FormControl-0c7a5a9b.js";import"./isMuiElement-28855bcf.js";import"./InputAdornment-345b342e.js";import"./Tooltip-0185c911.js";import"./TableCell-077dec01.js";import"./FormControlLabel-c815a521.js";import"./getThemeProps-e55d9c99.js";import"./validator-9e88d0aa.js";import"./statics-f6863f48.js";import"./products-autocomplete-4bf85a69.js";import"./sub-products-autocomplete-87ffbeaf.js";import"./use-product-sub-product-filter-4ba22b99.js";import"./moment-fbc5633a.js";import"./DialogContent-2da759e4.js";import"./DialogTitle-cffb5590.js";import"./KeyboardArrowDown-7229c3ca.js";import"./ButtonGroup-59079b0e.js";const H=({downloadExcel:r})=>{const o=K(),[t,l]=p.useState(null),s=!!t,[a]=N(),n=i=>{l(i.currentTarget)},c=()=>{l(null)},m=async()=>{const i=await G($(Object.fromEntries(a.entries())),o);console.log(i),r(i.data.list),c()};return e.jsxs("div",{children:[e.jsx(b,{variant:"outlined",className:"xls-button",onClick:n,children:"Excel"}),e.jsxs(q,{className:"new-list",anchorEl:t,open:s,onClose:c,children:[e.jsx(x,{sx:{borderColor:"var(--color-secondary)",backgroundColor:"white",borderBottom:"1px solid #E6E6E6",color:"var(--color-secondary)","&:hover":{backgroundColor:"var(--color-secondary)",color:"white"}},onClick:()=>{m()},children:e.jsx("span",{className:"menu-excel",children:"Download Orders"})}),e.jsx(x,{sx:{borderColor:"var(--color-secondary)",backgroundColor:"white",color:"var(--color-secondary)","&:hover":{backgroundColor:"var(--color-secondary)",color:"white"}},onClick:()=>{c()},children:e.jsx(z,{className:"menu-excel",href:"https://firebasestorage.googleapis.com/v0/b/cod-toop-3195b.appspot.com/o/assets%2Fcodtoop%20orders%20template.xlsx?alt=media&token=4ce93c4a-f778-4ee7-a5f3-fff943a652f8 ",download:!0,underline:"none",color:"inherit",children:"Download Template"})})]})]})},J=({queryFilter:r,setQueryFilter:o,setFilterOpen:t,handleExcelFileUpload:l,downloadExcel:s})=>{const a=()=>{o(n=>({type:n.type}))};return e.jsxs("div",{className:"datatableTitle",children:[e.jsxs("div",{className:"searchBar",children:[e.jsx(L,{queryFilter:r,setQueryFilter:o}),e.jsx(F,{queryFilter:r,setQueryFilter:o}),e.jsx(P,{queryFilter:r,setFilterOpen:t,handleClear:a,countColorFilter:1})]}),e.jsxs("div",{className:"buttons",children:[e.jsx(A,{label:"import",handleExcelUpload:l}),e.jsx(H,{downloadExcel:s}),e.jsx(f,{to:"/orders-affiliate-seller/new?country=local",className:"secondary-button",children:d("new")})]})]})},h="- - - - - - ",Q=[{field:"id",headerName:"id",flex:2,minWidth:130,headerAlign:"center",align:"center",renderCell:r=>e.jsx("div",{className:"cellWithImg",children:r.row.id})},{field:"clientName",headerName:d("client"),flex:2,minWidth:150,headerAlign:"center",align:"center",renderCell:r=>{var o,t;return e.jsx("div",{className:"cellWithImg",children:((t=(o=r.row)==null?void 0:o.client)==null?void 0:t.name)||h})}},{field:"client.phone",headerName:d("phone"),flex:2,minWidth:150,headerAlign:"center",align:"center",renderCell:r=>{var o,t,l,s,a,n,c,m,i;return e.jsx("div",{className:"cellWithImg",children:((l=(t=(o=r==null?void 0:r.row)==null?void 0:o.client)==null?void 0:t.phone)==null?void 0:l.code)===void 0?h:`+${(n=(a=(s=r==null?void 0:r.row)==null?void 0:s.client)==null?void 0:a.phone)==null?void 0:n.code}-${(i=(m=(c=r==null?void 0:r.row)==null?void 0:c.client)==null?void 0:m.phone)==null?void 0:i.number}`})}},{field:"totalPrice",headerName:d("price"),flex:1,minWidth:120,headerAlign:"center",align:"center",renderCell:r=>{var o,t;return e.jsxs("div",{className:"cellWithStatus ",children:[((o=r.row)==null?void 0:o.totalPrice)||h," ",e.jsx("span",{className:"uppercase",style:{color:"#757575",fontWeight:"500"},children:d((t=r.row)==null?void 0:t.currency)})]})}},{field:"currentStatus",headerName:d("status"),flex:2,minWidth:12*16,headerAlign:"center",align:"center",renderCell:r=>e.jsx(_,{status:r.row.currentStatus})},{field:"action",headerName:d("actions"),flex:1,minWidth:100,headerAlign:"center",align:"center",renderCell:r=>e.jsx("div",{className:"cellAction",children:e.jsx(f,{to:r.row._id,style:{textDecoration:"none"},children:e.jsx("div",{className:"capitalize detailsButton",children:d("details")})})})}],Ge=()=>{const r=S(E=>E.orderAffiliateSeller.orderAffiliateSellers),[o,t]=p.useState(!1),{queryFilter:l,setQueryFilter:s}=U({}),{paginationModel:a,setPaginationModel:n}=D(l,s,u),{downloadExcel:c}=O(),[m,i]=p.useState(!1),{errorMessages:j,showModal:g,handleExcelFileUpload:w,handleConfirmExcelImport:C,handleCloseModal:v}=W(i,R);return B(u),e.jsx("div",{className:"listData",children:e.jsx("div",{className:"listContainer",children:e.jsx("div",{className:"listTable",children:e.jsxs("div",{className:"datatableOrders overflowPreventer",children:[e.jsx(T,{open:g,handleCloseModal:v,errorMessages:j,handleConfirmExcelImport:C,uploadOrders:m}),e.jsx(k,{filterOpen:o,setFilterOpen:t,setQueryFilter:s,queryFilter:l,sellerType:y.affiliate,productType:"affiliate"}),e.jsx(I,{orders:r,count:r.statusCount,queryFilter:l,setQueryFilter:s}),e.jsx(J,{queryFilter:l,setQueryFilter:s,setFilterOpen:t,paginationModel:a,handleExcelFileUpload:w,downloadExcel:c}),e.jsx(M,{rows:r.list,columns:Q,totalItems:r.totalItems,paginationModel:a,setPaginationModel:n})]})})})})};export{Ge as default};
