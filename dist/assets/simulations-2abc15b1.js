import{ao as W,j as l,T as _,r as s,bq as K,t as g,aK as G,b as $,br as k,bs as Y,bt as Z,s as te,f as ce}from"./index-335be6bc.js";import{t as de,c as ie,s as ne}from"./shipping-632936fe.js";import{a as p,b as ee,c as le}from"./DialogContent-2da759e4.js";import{D as ae}from"./DialogContentText-3425fa31.js";import{T as y}from"./TextField-e3426f14.js";import{A as me}from"./Autocomplete-7da48e1d.js";import{u as se}from"./useDispatch-5616ae48.js";import{I}from"./InputAdornment-345b342e.js";import"./useSlot-06d6b379.js";import"./Paper-7bffdec0.js";import"./FormControl-0c7a5a9b.js";import"./isMuiElement-28855bcf.js";import"./List-429b0059.js";import"./Grow-32d2c9c3.js";import"./Portal-29f66c29.js";import"./useControlled-35363894.js";import"./Close-a8700400.js";import"./Popper-6a651f11.js";const fe=({open:e,onClose:r,newSimulationName:c,setNewSimulationName:o,onConfirm:i})=>{const{t}=W();return l.jsxs(p,{open:e,onClose:r,children:[l.jsxs(ee,{children:[l.jsx(ae,{children:t("Please provide a name for the new simulation.")}),l.jsx(y,{autoFocus:!0,margin:"dense",label:t("Simulation Name"),type:"text",fullWidth:!0,value:c,onChange:m=>o(m.target.value)})]}),l.jsxs(le,{children:[l.jsx(_,{onClick:r,color:"primary",children:t("Cancel")}),l.jsx(_,{onClick:i,color:"primary",children:t("Confirm")})]})]})},xe=({open:e,onClose:r,onConfirm:c})=>{const{t:o}=W();return l.jsxs(p,{open:e,onClose:r,children:[l.jsx(ee,{children:l.jsx(ae,{children:o("Are you sure you want to save the changes to this simulation?")})}),l.jsxs(le,{children:[l.jsx(_,{onClick:r,color:"primary",children:o("Cancel")}),l.jsx(_,{onClick:c,color:"primary",children:o("Confirm")})]})]})},he=({choosenSimulation:e,containerRef:r})=>{const[c,o]=s.useState(!1);return s.useEffect(()=>{const i=()=>{r.current.scrollTop>80?o(!0):o(!1)},t=r.current;return t.addEventListener("scroll",i),()=>{t.removeEventListener("scroll",i)}},[]),l.jsx("div",{ref:r,className:`scroll-detail ${c?"animated":""}`,children:l.jsxs("p",{children:[l.jsx("span",{children:"simulation:"})," ",e==null?void 0:e.name]})})},ve=({simulations:e,simulation:r,setChoosenSimulation:c})=>{const o=se();return l.jsx(me,{id:"simulations",loading:e.length===0,sx:{width:300,height:"56px",display:"flex",alignItems:"center"},options:e,getOptionLabel:i=>i&&i.name?i.name:"",value:r,onChange:(i,t,m)=>{m==="clear"?(c({_id:""}),o(K({_id:""}))):c(t)},renderOption:(i,t)=>s.createElement("li",{...i,key:t._id},t.name),renderInput:i=>l.jsx(y,{...i,label:g("choose a simulation"),placeholder:"choose a Simulations"})})},je=({simulations:e,choosenSimulation:r,setChoosenSimulation:c,handleNewSimulation:o,handleSave:i})=>{const t=G(v=>v.seller.currentSeller),{simulation:m,creatorId:d}=G(v=>v.simulation);return l.jsxs("div",{className:"top",children:[l.jsxs("div",{className:"simulations",children:[l.jsx(ve,{simulations:e,simulation:m,setChoosenSimulation:c}),l.jsx(_,{onClick:o,className:"secondary-button",variant:"outlined",children:g("new")})]}),((t==null?void 0:t._id)===d||(r==null?void 0:r._id)==="")&&l.jsx(_,{onClick:i,className:"primary-button",variant:"contained",children:g("save")})]})},Ne=({inputs:e,handleInput:r})=>l.jsx("div",{className:"fees-section",children:l.jsxs("div",{className:"fee-element-section",children:[l.jsx(y,{fullWidth:!0,autoComplete:"off",id:"price",name:"price",type:"number",label:g("selling price"),inputProps:{step:"10",min:"0"},variant:"outlined",value:(e==null?void 0:e.price)??"",onChange:r}),l.jsx(y,{fullWidth:!0,id:"leads",autoComplete:"off",value:(e==null?void 0:e.leads)??"",type:"number",name:"leads",label:g("leads"),inputProps:{step:"10",min:"1"},variant:"outlined",onChange:r}),l.jsx(y,{fullWidth:!0,id:"confirmationRate",type:"number",className:"input-percent",autoComplete:"off",label:g("confirmation rate"),inputProps:{step:"5",min:"0",max:"100"},variant:"outlined",name:"confirmationRate",value:(e==null?void 0:e.confirmationRate)??"",InputProps:{endAdornment:l.jsx(I,{className:"percent",position:"start",children:"%"}),inputProps:{step:"5",min:"0",max:"100"}},onChange:r}),l.jsx(y,{fullWidth:!0,id:"deliveryRate",type:"number",className:"input-percent",value:(e==null?void 0:e.deliveryRate)??"",autoComplete:"off",label:g("delivery rate"),InputProps:{endAdornment:l.jsx(I,{className:"percent",position:"start",children:"%"}),inputProps:{step:"5",min:"0",max:"100"}},variant:"outlined",onChange:r,name:"deliveryRate"}),l.jsx(y,{fullWidth:!0,id:"upsellRate",type:"number",autoComplete:"off",className:"input-percent",label:g("upsell rate"),value:(e==null?void 0:e.upsellRate)??"",InputProps:{endAdornment:l.jsx(I,{className:"percent",position:"start",children:"%"}),inputProps:{step:"5",min:"0",max:"100"}},variant:"outlined",onChange:r,name:"upsellRate"})]})}),we=({wills:e,investedCapital:r,adsCostPerPieceSold:c,totalProfitUpsell:o,payment:i,netProfit:t,profitToCapitalRatio:m})=>{const{t:d}=W();return l.jsxs("div",{className:"results-calcs",children:[l.jsx("div",{className:"single-result",children:l.jsxs("div",{className:"fee-results-element",children:[l.jsx("div",{className:"fee-result-title",children:d("Revenue")}),l.jsx("div",{className:"fee-result-value dollar",children:e.toFixed(2)||0})]})}),l.jsx("div",{className:"single-result",children:l.jsxs("div",{className:"fee-results-element",children:[l.jsx("div",{className:"fee-result-title",children:d("invested capital")}),l.jsx("div",{className:"fee-result-value dollar",children:r.toFixed(2)||0})]})}),l.jsx("div",{className:"single-result",children:l.jsxs("div",{className:"fee-results-element",children:[l.jsx("div",{className:"fee-result-title",children:d("ads cost per piece sold")}),l.jsx("div",{className:"fee-result-value dollar",children:c.toFixed(2)??0})]})}),l.jsx("div",{className:"single-result",children:l.jsxs("div",{className:"fee-results-element",children:[l.jsx("div",{className:"fee-result-title",children:d("total profit on upsell")}),l.jsx("div",{className:"fee-result-value dollar",children:o.toFixed(2)||0})]})}),l.jsx("div",{className:"single-result",children:l.jsxs("div",{className:"fee-results-element",children:[l.jsx("div",{className:"fee-result-title",children:d("payment")}),l.jsx("div",{className:"fee-result-value dollar",children:i.toFixed(2)||0})]})}),l.jsx("div",{className:"single-result",children:l.jsxs("div",{className:"fee-results-element ",children:[l.jsx("div",{className:"fee-result-title",children:d("net profit")}),l.jsx("div",{className:"fee-result-value dollar",children:t.toFixed(2)||0})]})}),l.jsx("div",{className:"single-result",children:l.jsxs("div",{className:"fee-results-element none-border",children:[l.jsx("div",{className:"fee-result-title",children:d("R O I")}),l.jsx("div",{className:"fee-result-value percentage",children:isFinite(m)&&(m*100).toFixed(2)||0})]})})]})},ue=({inputs:e,handleInput:r,focusClear:c,blurValue:o,productCostTotal:i,adsTotal:t,quantity:m,leadsConfirmation:d,totalConfirmation:v,upsellQuantityDelivered:j,feeTotal:S,totalCostDelivery:x,totalCostReturn:F,totalExtraExpenses:u,wills:C,investedCapital:f,adsCostPerPieceSold:b,totalProfitUpsell:P,payment:A,netProfit:E,profitToCapitalRatio:R,tasks:N,callCenter:B,shipping:w})=>{const{t:a}=W();return l.jsxs("div",{className:"table-center",children:[l.jsxs("div",{className:"single-row",children:[l.jsx("div",{className:"row-left",children:l.jsxs("div",{className:"element-type",children:[l.jsx("div",{className:"element-icon",children:l.jsx("img",{src:N,alt:"operation",className:"rotate10"})}),l.jsx("div",{className:"element-title capitalize",children:a("operations")})]})}),l.jsxs("div",{className:"row-center",children:[l.jsxs("div",{className:"fee-row-container",children:[l.jsxs("h3",{children:[" ",a("product")]}),l.jsxs("div",{className:"fee-row-elements",children:[l.jsxs("div",{className:"fee-row-element-simulation",children:[l.jsx("span",{className:"fee-row-title",children:a("cost")}),l.jsx("input",{className:"fee-row-input-simultaion",type:"number",autoComplete:"off",value:(e==null?void 0:e.productCost)??"",onChange:r,name:"productCost",onFocus:c,onBlur:o,min:"0"})]}),l.jsxs("div",{className:"fee-row-element-simulation result",children:[l.jsx("span",{className:"fee-row-title",children:a("quantity")}),l.jsx("span",{className:"fee-row-value",children:m??""})]}),l.jsxs("div",{className:"fee-row-element-simulation result",children:[l.jsx("span",{className:"fee-row-title",children:a("total")}),l.jsx("span",{className:"fee-row-value dollar",children:i?i.toFixed(2):0})]})]})]}),l.jsxs("div",{className:"fee-row-container",children:[l.jsxs("h3",{children:[" ",a("ads")]}),l.jsxs("div",{className:"fee-row-elements",children:[l.jsxs("div",{className:"fee-row-element-simulation",children:[l.jsx("span",{className:"fee-row-title",children:a("cost")}),l.jsx("input",{min:"0",className:"fee-row-input-simultaion",type:"number",name:"adsCost",autoComplete:"off",defaultValue:0,value:(e==null?void 0:e.adsCost)??"",onChange:r,onFocus:c,onBlur:o})]}),l.jsxs("div",{className:"fee-row-element-simulation result",children:[l.jsx("span",{className:"fee-row-title",children:a("leads")}),l.jsx("span",{className:"fee-row-value",children:(e==null?void 0:e.leads)??""})]}),l.jsxs("div",{className:"fee-row-element-simulation result",children:[l.jsx("span",{className:"fee-row-title",children:a("total")}),l.jsx("span",{className:"fee-row-value dollar",children:t?t.toFixed(2):0})]})]})]}),l.jsxs("div",{className:"fee-row-container",children:[l.jsxs("h3",{children:[" ",a("extra expenses")]}),l.jsx("div",{className:"fee-row-elements",children:l.jsxs("div",{className:"fee-row-element-simulation",children:[l.jsx("span",{className:"fee-row-title",children:a("extra expenses")}),l.jsx("input",{min:"0",className:"fee-row-input-simultaion",type:"number",name:"extraExpenses",autoComplete:"off",defaultValue:0,value:(e==null?void 0:e.extraExpenses)??"",onChange:r,onFocus:c,onBlur:o})]})})]})]})]}),l.jsxs("div",{className:"single-row",children:[l.jsx("div",{className:"row-left",children:l.jsxs("div",{className:"element-type",children:[l.jsx("div",{className:"element-icon",children:l.jsx("img",{src:B,alt:"call center"})}),l.jsx("div",{className:"element-title capitalize",children:a("call center")})]})}),l.jsxs("div",{className:"row-center",children:[l.jsxs("div",{className:"fee-row-container",children:[l.jsxs("h3",{children:[" ",a("confirmation")]}),l.jsxs("div",{className:"fee-row-elements",children:[l.jsxs("div",{className:"fee-row-element-simulation call-center-fee",children:[l.jsxs("span",{className:"new",children:[l.jsx("span",{className:"fee-row-title ",children:a("new")}),l.jsx("input",{min:"0",className:"fee-row-input-simultaion",type:"number",name:"newFee",autoComplete:"off",defaultValue:0,value:(e==null?void 0:e.newFee)??"",onChange:r,onFocus:c,onBlur:o})]}),l.jsxs("span",{className:" confirm-follow",children:[l.jsx("span",{className:"fee-row-title",children:a("fee")}),l.jsx("input",{min:"0",className:"fee-row-input-simultaion",type:"number",name:"confirmationFee",autoComplete:"off",defaultValue:0,value:(e==null?void 0:e.confirmationFee)??"",onChange:r,onFocus:c,onBlur:o})]})]}),l.jsxs("div",{className:"fee-row-element-simulation result",children:[l.jsx("span",{className:"fee-row-title",children:a("leads")}),l.jsx("span",{className:"fee-row-value",children:d||0})]}),l.jsxs("div",{className:"fee-row-element-simulation result",children:[l.jsx("span",{className:"fee-row-title",children:a("total")}),l.jsx("span",{className:"fee-row-value dollar",children:v?v.toFixed(2):0})]})]})]}),l.jsxs("div",{className:"fee-row-container",children:[l.jsxs("h3",{children:[" ",a("upsell")]}),l.jsxs("div",{className:"fee-row-elements",children:[l.jsxs("div",{className:"fee-row-sub-elements",children:[l.jsxs("div",{className:"fee-row-element-simulation",children:[l.jsx("span",{className:"fee-row-title",children:a("fee")}),l.jsx("input",{min:"0",className:"fee-row-input-simultaion",type:"number",name:"upsellFee",value:(e==null?void 0:e.upsellFee)??"",autoComplete:"off",defaultValue:0,onChange:r,onFocus:c,onBlur:o})]}),l.jsxs("div",{className:"fee-row-element-simulation",children:[l.jsx("span",{className:"fee-row-title",children:a("product cost")}),l.jsx("input",{min:"0",className:"fee-row-input-simultaion",type:"number",name:"upsellProductCost",autoComplete:"off",defaultValue:0,value:(e==null?void 0:e.upsellProductCost)??"",onChange:r,onFocus:c,onBlur:o})]})]}),l.jsxs("div",{className:"fee-row-sub-elements",children:[l.jsxs("div",{className:"fee-row-element-simulation result",children:[l.jsx("span",{className:"fee-row-title",children:a("leads delivered")}),l.jsx("span",{className:"fee-row-value ",children:j||0})]}),l.jsxs("div",{className:"fee-row-element-simulation",children:[l.jsx("span",{className:"fee-row-title",children:a("price")}),l.jsx("input",{min:"0",className:"fee-row-input-simultaion",type:"number",name:"upsellPrice",autoComplete:"off",defaultValue:0,value:(e==null?void 0:e.upsellPrice)??"",onChange:r,onFocus:c,onBlur:o})]})]}),l.jsx("div",{className:"fee-row-sub-elements",children:l.jsxs("div",{className:"fee-row-element-simulation result",children:[l.jsx("span",{className:"fee-row-title",children:a("total")}),l.jsx("span",{className:"fee-row-value dollar",children:S?S.toFixed(2):0})]})})]})]})]})]}),l.jsxs("div",{className:"single-row",children:[l.jsx("div",{className:"row-left last-child",children:l.jsxs("div",{className:"element-type",children:[l.jsx("div",{className:"element-icon",children:l.jsx("img",{src:w,alt:"shipping"})}),l.jsx("div",{className:"element-title shipping",children:a("shipping")})]})}),l.jsxs("div",{className:"row-center",children:[l.jsxs("div",{className:"fee-row-container",children:[l.jsxs("h3",{children:[" ",a("delivery")]}),l.jsxs("div",{className:"fee-row-elements",children:[l.jsxs("div",{className:"fee-row-element-simulation",children:[l.jsx("span",{className:"fee-row-title ",children:a("fee")}),l.jsx("input",{min:"0",className:"fee-row-input-simultaion",type:"number",name:"deliveryFee",autoComplete:"off",defaultValue:0,value:(e==null?void 0:e.deliveryFee)??"",onChange:r,onFocus:c,onBlur:o})]}),l.jsxs("div",{className:"fee-row-element-simulation result",children:[l.jsx("span",{className:"fee-row-title",children:a("leads")}),l.jsx("span",{className:"fee-row-value",children:m||0})]}),l.jsxs("div",{className:"fee-row-element-simulation result",children:[l.jsx("span",{className:"fee-row-title",children:a("total")}),l.jsx("span",{className:"fee-row-value dollar",children:x?x.toFixed(2):0})]})]})]}),l.jsxs("div",{className:"fee-row-container",children:[l.jsxs("h3",{children:[" ",a("return")]}),l.jsxs("div",{className:"fee-row-elements",children:[l.jsxs("div",{className:"fee-row-element-simulation",children:[l.jsx("span",{className:"fee-row-title",children:a("return")}),l.jsx("input",{min:"0",className:"fee-row-input-simultaion",type:"number",name:"returnFee",autoComplete:"off",defaultValue:0,value:(e==null?void 0:e.returnFee)??"",onChange:r,onFocus:c,onBlur:o})]}),l.jsxs("div",{className:"fee-row-element-simulation result",children:[l.jsx("span",{className:"fee-row-title",children:a("leads")}),l.jsx("span",{className:"fee-row-value",children:d-m||0})]}),l.jsxs("div",{className:"fee-row-element-simulation result",children:[l.jsx("span",{className:"fee-row-title",children:a("total")}),l.jsx("span",{className:"fee-row-value dollar",children:F?F.toFixed(2):0})]})]})]}),l.jsxs("div",{className:"fee-row-container",children:[l.jsxs("h3",{children:[" ",a("fees")]}),l.jsxs("div",{className:"fee-row-elements",children:[l.jsxs("div",{className:"fee-row-element-simulation",children:[l.jsx("span",{className:"fee-row-title  ",children:a("vat")}),l.jsxs("div",{className:"percentage-input",children:[l.jsx("input",{min:"0",className:"fee-row-input-simultaion",type:"number",name:"vatFee",autoComplete:"off",value:(e==null?void 0:e.vatFee)??"",defaultValue:0,onChange:r,onFocus:c,onBlur:o}),(e==null?void 0:e.vatFee)!==0&&l.jsx("span",{className:"percentage-sign",children:"%"})]})]}),l.jsxs("div",{className:"fee-row-element-simulation",children:[l.jsx("span",{className:"fee-row-title ",children:a("cod")}),l.jsxs("div",{className:"percentage-input",children:[l.jsx("input",{min:"0",className:"fee-row-input-simultaion",type:"number",name:"codFee",autoComplete:"off",defaultValue:0,value:(e==null?void 0:e.codFee)??"",onChange:r,onFocus:c,onBlur:o}),(e==null?void 0:e.codFee)!==0&&l.jsx("span",{className:"percentage-sign",children:"%"})]})]}),l.jsxs("div",{className:"fee-row-element-simulation result",children:[l.jsx("span",{className:"fee-row-title",children:a("total")}),l.jsx("span",{className:"fee-row-value dollar",children:u?u.toFixed(2):0})]})]})]})]})]}),l.jsx("div",{className:"single-row",children:l.jsxs("div",{className:"row-center-result",children:[l.jsx("div",{className:"single-result",children:l.jsxs("div",{className:"fee-results-element",children:[l.jsx("div",{className:"fee-result-title",children:a("wills")}),l.jsx("div",{className:"fee-result-value dollar",children:C.toFixed(2)})]})}),l.jsx("div",{className:"single-result",children:l.jsxs("div",{className:"fee-results-element",children:[l.jsx("div",{className:"fee-result-title",children:a("invested capital")}),l.jsx("div",{className:"fee-result-value dollar",children:f.toFixed(2)})]})}),l.jsx("div",{className:"single-result",children:l.jsxs("div",{className:"fee-results-element",children:[l.jsx("div",{className:"fee-result-title",children:a("ads cost per piece sold")}),l.jsx("div",{className:"fee-result-value dollar",children:isFinite(b)&&b.toFixed(2)})]})}),l.jsx("div",{className:"single-result",children:l.jsxs("div",{className:"fee-results-element",children:[l.jsx("div",{className:"fee-result-title",children:a("total profit on upsell")}),l.jsx("div",{className:"fee-result-value dollar",children:P?P.toFixed(2):0})]})}),l.jsx("div",{className:"single-result",children:l.jsxs("div",{className:"fee-results-element",children:[l.jsx("div",{className:"fee-result-title",children:a("payment")}),l.jsx("div",{className:"fee-result-value dollar",children:A.toFixed(2)})]})}),l.jsx("div",{className:"single-result",children:l.jsxs("div",{className:"fee-results-element",children:[l.jsx("div",{className:"fee-result-title",children:a("net profit")}),l.jsx("div",{className:"fee-result-value dollar",children:isNaN(E)?E.toFixed(2):0})]})}),l.jsx("div",{className:"single-result ",children:l.jsxs("div",{className:"fee-results-element ",children:[l.jsx("div",{className:"fee-result-title only-child",children:a("R O I")}),l.jsx("div",{className:"fee-result-value percentage",children:isFinite(R)&&(R*100).toFixed(2)||0})]})})]})})]})},ge=e=>{const[r,c]=s.useState(0),[o,i]=s.useState(0),[t,m]=s.useState(0),[d,v]=s.useState(0),[j,S]=s.useState(0),[x,F]=s.useState(0),[u,C]=s.useState(0),[f,b]=s.useState(0),[P,A]=s.useState(0),[E,R]=s.useState(0),[N,B]=s.useState(0),[w,a]=s.useState(0),[z,O]=s.useState(0),[L,M]=s.useState(0),[D,Q]=s.useState(0),[T,U]=s.useState(0),[V,q]=s.useState(0);return s.useEffect(()=>{i(Math.round((e==null?void 0:e.leads)*(e==null?void 0:e.confirmationRate)*(e==null?void 0:e.deliveryRate)/1e4))},[e]),s.useEffect(()=>{v(Math.round((e==null?void 0:e.leads)*(e==null?void 0:e.confirmationRate)/100))},[e]),s.useEffect(()=>{c(o*(e==null?void 0:e.productCost))},[e==null?void 0:e.productCost,o]),s.useEffect(()=>{b(Math.round((e==null?void 0:e.leads)*(e==null?void 0:e.upsellRate)*(e==null?void 0:e.deliveryRate)*(e==null?void 0:e.confirmationRate)/1e6))},[e]),s.useEffect(()=>{A(f*(e==null?void 0:e.upsellFee))},[f,e==null?void 0:e.upsellFee]),s.useEffect(()=>{R(N*((e==null?void 0:e.vatFee)+(e==null?void 0:e.codFee))/100)},[e==null?void 0:e.vatFee,e==null?void 0:e.codFee,N]),s.useEffect(()=>{m((e==null?void 0:e.newFee)*(e==null?void 0:e.leads)+(e==null?void 0:e.confirmationFee)*d)},[e==null?void 0:e.confirmationFee,d,e==null?void 0:e.newFee]),s.useEffect(()=>{S((e==null?void 0:e.adsCost)*(e==null?void 0:e.leads))},[e]),s.useEffect(()=>{F(o*(e==null?void 0:e.deliveryFee))},[o,e==null?void 0:e.deliveryFee]),s.useEffect(()=>{C((e==null?void 0:e.returnFee)*(d-o))},[o,e==null?void 0:e.returnFee,d]),s.useEffect(()=>{B((e==null?void 0:e.price)*o+f*(e==null?void 0:e.upsellPrice)||0)},[e==null?void 0:e.price,o,f,e==null?void 0:e.upsellPrice]),s.useEffect(()=>{a(j+Number(r)+Number(e==null?void 0:e.extraExpenses)+(e==null?void 0:e.upsellProductCost)*f||0)},[j,r,e==null?void 0:e.extraExpenses,e==null?void 0:e.upsellProductCost,f]),s.useEffect(()=>{(e==null?void 0:e.leads)>0&&O(j/o||0)},[j,e==null?void 0:e.leads,o]),s.useEffect(()=>{M(((e==null?void 0:e.upsellPrice)-(e==null?void 0:e.upsellProductCost)-(e==null?void 0:e.upsellFee))*f||0)},[e==null?void 0:e.upsellPrice,e==null?void 0:e.upsellProductCost,e==null?void 0:e.upsellFee,f]),s.useEffect(()=>{Q(N*(1-((e==null?void 0:e.vatFee)+(e==null?void 0:e.codFee))/100)-t-x-u-f*(e==null?void 0:e.upsellFee)||0)},[N,e==null?void 0:e.vatFee,e==null?void 0:e.codFee,t,x,f,e==null?void 0:e.upsellFee,u]),s.useEffect(()=>{U(D-w||0)},[D,w]),s.useEffect(()=>{q(T/w||0)},[T,w]),{productCostTotal:r,quantity:o,totalConfirmation:t,leadsConfirmation:d,adsTotal:j,totalCostDelivery:x,totalCostReturn:u,upsellQuantityDelivered:f,feeTotal:P,totalExtraExpenses:E,wills:N,investedCapital:w,adsCostPerPieceSold:z,totalProfitUpsell:L,payment:D,netProfit:T,profitToCapitalRatio:V}},Fe=e=>{Number(e.target.value)===0&&(e.target.value="")},Ue=()=>{const{t:e}=W(),[r,c]=s.useState(!1),[o,i]=s.useState(""),t=se(),{inputs:m,simulation:d,updatedAt:v}=G(n=>n.simulation),[j,S]=s.useState([]),[x,F]=s.useState(d),[u,C]=s.useState(!1),f=n=>{if(n.target.value===""||n.target.value===null){n.target.value="0";const h=n.target.name;t(k({[h]:0}))}if(Number(n.target.value)===0){n.target.value="0";const h=n.target.name;t(k({[h]:0}))}};s.useEffect(()=>{try{(async()=>{const h=await $.get("/simulation/name-pagination");S(h.data.list)})()}catch(n){console.log(n)}},[]),s.useEffect(()=>{try{x._id&&(async()=>{const h=await $.get(`/simulation/single/${x._id}`);(v===""||h.data._doc.updatedAt!==v)&&(t(k({...h.data._doc.inputs})),t(K(x)),t(Y(h.data._doc.creatorId)),t(Z(h.data._doc.updatedAt)))})()}catch(n){console.log(n)}},[x,t,d._id,v]);const{productCostTotal:b,quantity:P,totalConfirmation:A,leadsConfirmation:E,adsTotal:R,totalCostDelivery:N,totalCostReturn:B,upsellQuantityDelivered:w,feeTotal:a,totalExtraExpenses:z,wills:O,investedCapital:L,adsCostPerPieceSold:M,totalProfitUpsell:D,payment:Q,netProfit:T,profitToCapitalRatio:U}=ge(m),V=()=>{t(k({price:0,leads:0,confirmationRate:0,deliveryRate:0,upsellRate:0,productCost:0,adsCost:0,extraExpenses:0,confirmationFee:0,upsellFee:0,upsellProductCost:0,upsellPrice:0,deliveryFee:0,returnFee:0,vatFee:0,codFee:0})),t(K({_id:""})),F({_id:""}),t(Y("")),t(Z(""))},q=n=>{const h=n.target.name;let H=n.target.value;h==="leads"&&(H=H.split(".")[0]);const oe=H===""?null:Number(H);t(k({[h]:oe}))},re=async()=>{d._id?C(!0):c(!0)},J=async()=>{try{const n=await $.post("/simulation",{name:d!=null&&d._id?d==null?void 0:d.name:o,inputs:m});te(n.data.responseMessage,t),d._id===""?c(!1):C(!1)}catch(n){ce(n,t),d._id===""?console.error("Failed to save new simulation:",n):console.error("Failed to save changes to simulation:",n)}},X=s.useRef(null);return l.jsx("div",{className:"singleSimulation",children:l.jsxs("div",{className:"singleContainer overflowPreventerFlexbox",children:[l.jsx(fe,{open:r,onClose:()=>c(!1),newSimulationName:o,setNewSimulationName:i,onConfirm:J}),l.jsx(xe,{open:u,onClose:()=>C(!1),onConfirm:J}),l.jsx(he,{choosenSimulation:x,containerRef:X}),l.jsx("div",{className:"bottom",children:l.jsxs("div",{className:"overflowPreventer",ref:X,children:[l.jsx("div",{className:"title",children:e("simulation")}),l.jsx(je,{simulations:j,choosenSimulation:x,setChoosenSimulation:F,handleNewSimulation:V,handleSave:re}),l.jsx(Ne,{inputs:m,handleInput:q}),l.jsxs("div",{className:"table",children:[l.jsx(ue,{inputs:m,handleInput:q,focusClear:Fe,blurValue:f,productCostTotal:b,adsTotal:R,quantity:P,leadsConfirmation:E,totalConfirmation:A,upsellQuantityDelivered:w,feeTotal:a,totalCostDelivery:N,totalCostReturn:B,totalExtraExpenses:z,wills:O,investedCapital:L,adsCostPerPieceSold:M,totalProfitUpsell:D,payment:Q,netProfit:T,profitToCapitalRatio:U,tasks:de,callCenter:ie,shipping:ne}),l.jsx(we,{wills:O,investedCapital:L,adsCostPerPieceSold:M,totalProfitUpsell:D,payment:Q,netProfit:T,profitToCapitalRatio:U})]})]})})]})})};export{Ue as default};
