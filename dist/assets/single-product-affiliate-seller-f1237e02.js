import{j as e,t as n,u as M,r as l,T as g,b as p}from"./index-335be6bc.js";import{L as Y}from"./Link-6563cda1.js";import{h as B}from"./moment-fbc5633a.js";import{k,e as C,q as w,a as _,b as A,o as K}from"./bahrain-57f02bd3.js";import{I as F}from"./image-gallery-v1-be18afe0.js";import{T as H}from"./Tooltip-0185c911.js";import{S as z}from"./Snackbar-abf2ba22.js";import{A as W}from"./Alert-67637005.js";import"./useSlot-06d6b379.js";import"./Popper-6a651f11.js";import"./Grow-32d2c9c3.js";import"./Portal-29f66c29.js";import"./useControlled-35363894.js";import"./ClickAwayListener-9b9a333f.js";import"./Paper-7bffdec0.js";import"./Close-a8700400.js";var G={70:k,71:C,72:w,73:_,74:A,75:K},Q={70:"SAR",71:"AED",72:"QAR",73:"KWD",74:"BHD",75:"OMR"};const V=({offers:c})=>e.jsx("div",{className:"offers-list",children:(c==null?void 0:c.length)>0&&c.slice(0,3).map((r,s)=>e.jsxs("div",{className:"offer-card",children:[e.jsxs("div",{className:"offer-details",children:[e.jsxs("span",{children:[r.quantity," ",n("piece")]}),e.jsxs("span",{children:[r.targetPrice," ",Q[r.country]," -"," ",e.jsxs("span",{className:"commission",children:[r.commission,"$"]})]})]}),e.jsx("img",{src:G[r.country],className:"offer-country",alt:""})]},s))}),ce=()=>{var N,f;const r=M().pathname.split("/")[2],[s,S]=l.useState({}),[i,o]=l.useState({_id:""});l.useEffect(()=>{(async()=>{const t=await p.get(`/product-affiliate/single/${r}`);S(t.data._doc)})()},[]),l.useEffect(()=>{s!=null&&s._id&&o(s==null?void 0:s.products[0])},[s==null?void 0:s._id]),l.useEffect(()=>{var a;if(i!=null&&i._id){x((a=i==null?void 0:i.offers[0])==null?void 0:a.country);const t=[...new Set(i.offers.map(y=>y.country))];O(t)}},[i]),l.useState(!1);var D={70:k,71:C,72:w,73:_,74:A,75:K};const E=a=>{o(a)},[m,x]=l.useState(""),[L,R]=l.useState([]),[$,O]=l.useState([]);l.useEffect(()=>{if(i!=null&&i._id){const a=i==null?void 0:i.offers.filter(t=>(t==null?void 0:t.country)===m);R(a)}},[m]);const[h,d]=l.useState(null),j=()=>d(null),v=async()=>{try{const t=(await p.get(`/product-affiliate/get-link/${s._id}?country=${m}`)).data.link;window.open(t,"_blank","noopener,noreferrer"),await navigator.clipboard.writeText(t),d({children:"Link Copied successfully",severity:"success"})}catch(a){console.log("Fail to fetch link",a),d({children:"Link can not be copied",severity:"error"})}};return e.jsxs("div",{className:"singleAffiliateSeller",children:[e.jsx("div",{className:"singleContainer overflowPreventerFlexbox",children:e.jsx("div",{className:"overflowPreventerContainer",children:e.jsx("div",{className:"overflowPreventer",children:e.jsxs("div",{className:"top",children:[e.jsxs("div",{className:"left",children:[e.jsxs("div",{className:"header",children:[e.jsxs("div",{className:"id-title",children:[s==null?void 0:s.id,e.jsx("span",{className:"date",children:e.jsx("div",{className:"date",children:e.jsx("span",{className:"valueKey",children:B(s==null?void 0:s.createdAt).format("DD/MM/YYYY hh:mm A")})})})]}),e.jsx("div",{className:"editButtonContainer",children:e.jsx(g,{className:"primary-button",onClick:v,children:n("visit")})})]}),e.jsx(F,{images:i==null?void 0:i.images}),e.jsxs("div",{className:"details",children:[e.jsx("div",{className:"title",children:e.jsxs("div",{className:"name",children:[s.name," "]})}),e.jsx("div",{className:"status",children:e.jsx("span",{className:`valueKey cellWithStatus ${n(i==null?void 0:i.currentStatus,{lng:"en"})}`,children:n(i==null?void 0:i.currentStatus)})})]}),e.jsxs("div",{className:"detailItem",children:[e.jsxs("span",{className:"itemKey",children:[n("id")," :"]}),e.jsx("span",{className:"valueKey valueKeyId",children:i==null?void 0:i.id})]}),Object.values(((N=s==null?void 0:s.products)==null?void 0:N[0].variations)||[]).length>0&&e.jsxs("div",{className:"variations-section",children:[e.jsx("div",{className:"itemKey capitalize",children:n("variations")}),e.jsx("div",{className:"variations",children:s==null?void 0:s.products.map((a,t)=>e.jsx("button",{className:a._id===i._id?"active variations-bullet":"variations-bullet",onClick:()=>E(a),children:(a==null?void 0:a.variations)&&e.jsxs(e.Fragment,{children:[(a==null?void 0:a.variations.color)&&e.jsx("span",{style:{display:"inline-block",width:"16px",height:"16px",borderRadius:"50%",backgroundColor:a==null?void 0:a.variations.color,marginRight:"8px"}}),Object.entries(a==null?void 0:a.variations).map(([y,T],q)=>e.jsxs("span",{children:[T," "]},q))]})},t))})]}),e.jsxs("div",{className:"offers-section",children:[e.jsxs("div",{className:"title-countries",children:[e.jsxs("div",{className:"itemKey capitalize",children:[n("offers"),e.jsx(H,{title:`copy affiliate link for country ${n(m)}`,children:e.jsx(g,{className:"link-offer",rel:"noopener",onClick:v,children:e.jsx(Y,{})})})]}),e.jsx("div",{className:"countries-buttons",children:$.map(a=>e.jsx("img",{src:D[a],onClick:()=>{x(a)},alt:"",className:`country ${Number(m)===Number(a)?"selected-country":""}`}))})]}),e.jsx(V,{offers:L})]})]}),e.jsx("div",{className:"right",children:e.jsxs("div",{className:"item",children:[e.jsxs("div",{className:"category",children:[e.jsxs("span",{className:"itemKey ",children:[n("categories"),": "]}),e.jsx("span",{className:"bullets",children:(f=s==null?void 0:s.category)==null?void 0:f.map((a,t)=>e.jsx("span",{className:"tags-bullets",children:n(a)}))})]}),e.jsxs("div",{className:"detailItem description",children:[e.jsxs("span",{className:"itemKey",children:[n("product description")," :"]}),e.jsx("div",{className:"description-container",dangerouslySetInnerHTML:{__html:s==null?void 0:s.description}})]})]})})]})})})}),!!h&&e.jsx(z,{open:!0,onClose:j,autoHideDuration:3e3,children:e.jsx(W,{...h,onClose:j})})]})};export{ce as default};
