import{r as p,j as e,T as f,t as s,aT as u,ah as j,a8 as k,aK as S}from"./index-335be6bc.js";import{I as O,u as B,a as D,b as A,c as W,d as T,O as I,W as M,e as F}from"./import-excel-dialog-6a39353d.js";import{D as P}from"./drop-down-order-type-c0d45b22.js";import{F as L}from"./filter-button-group-69656d3d.js";import{M as w}from"./TextField-e3426f14.js";import{M as h}from"./MenuItem-ae06aebb.js";import{S as U,u as $}from"./use-query-filter-82542176.js";import{q as K}from"./functions-6046b92c.js";import{b as z,c as C,d as G}from"./order-normal-seller-calls-63fd1628.js";import{L as q}from"./Link-f99010b1.js";import{u as R}from"./useDispatch-5616ae48.js";import{S as _}from"./status-cell-abbf33fa.js";import"./DataGrid-b5ad00e6.js";import"./Divider-88aee12a.js";import"./Autocomplete-7da48e1d.js";import"./Close-a8700400.js";import"./useSlot-06d6b379.js";import"./Popper-6a651f11.js";import"./Grow-32d2c9c3.js";import"./Portal-29f66c29.js";import"./Paper-7bffdec0.js";import"./useControlled-35363894.js";import"./ClickAwayListener-9b9a333f.js";import"./List-429b0059.js";import"./ListItemText-666b43be.js";import"./listItemTextClasses-c15af42f.js";import"./Checkbox-863386b3.js";import"./SwitchBase-6ca860c4.js";import"./FormControl-0c7a5a9b.js";import"./isMuiElement-28855bcf.js";import"./InputAdornment-345b342e.js";import"./Tooltip-0185c911.js";import"./TableCell-077dec01.js";import"./FormControlLabel-c815a521.js";import"./getThemeProps-e55d9c99.js";import"./validator-9e88d0aa.js";import"./statics-f6863f48.js";import"./products-autocomplete-4bf85a69.js";import"./sub-products-autocomplete-87ffbeaf.js";import"./use-product-sub-product-filter-4ba22b99.js";import"./moment-fbc5633a.js";import"./DialogContent-2da759e4.js";import"./DialogTitle-cffb5590.js";import"./KeyboardArrowDown-7229c3ca.js";import"./ButtonGroup-59079b0e.js";const H=()=>{const[r,o]=p.useState(null),l=!!r,n=a=>{o(a.currentTarget)},t=()=>{o(null)};return e.jsxs("div",{children:[e.jsx(f,{variant:"outlined",className:"secondary-button",onClick:n,children:e.jsx("span",{className:"capitalize",children:s("new")})}),e.jsxs(w,{className:"new-list",anchorEl:r,open:l,onClose:t,children:[e.jsx(h,{sx:{borderColor:"var(--color-secondary)",backgroundColor:"white",borderBottom:"1px solid #E6E6E6",color:"var(--color-secondary)","&:hover":{backgroundColor:"var(--color-secondary)",color:"white"}},onClick:()=>t(),children:e.jsx(u,{to:"/orders-normal-seller/new?country=local",className:"link",children:s("local order")})}),e.jsx(h,{sx:{borderColor:"var(--color-secondary)",backgroundColor:"white",color:"var(--color-secondary)","&:hover":{backgroundColor:"var(--color-secondary)",color:"white"}},onClick:t,children:e.jsx(u,{to:`/orders-normal-seller/new?country=${j.KSA}`,className:"link",children:s("international from KSA")})}),e.jsx(h,{sx:{borderColor:"var(--color-secondary)",backgroundColor:"white",color:"var(--color-secondary)","&:hover":{backgroundColor:"var(--color-secondary)",color:"white"}},onClick:t,children:e.jsx(u,{to:`/orders-normal-seller/new?country=${j.UAE}`,className:"link",children:s("international from UAE")})})]})]})},J=({downloadExcel:r})=>{const o=R(),[l,n]=p.useState(null),t=!!l,[a]=k(),c=i=>{n(i.currentTarget)},d=()=>{n(null)},m=async()=>{const i=await z(K(Object.fromEntries(a.entries())),o);console.log(i),r(i.data.list),d()};return e.jsxs("div",{children:[e.jsx(f,{variant:"outlined",className:"xls-button",onClick:c,children:"Excel"}),e.jsxs(w,{className:"new-list",anchorEl:l,open:t,onClose:d,children:[e.jsx(h,{sx:{borderColor:"var(--color-secondary)",backgroundColor:"white",borderBottom:"1px solid #E6E6E6",color:"var(--color-secondary)","&:hover":{backgroundColor:"var(--color-secondary)",color:"white"}},onClick:()=>{m()},children:e.jsx("span",{className:"menu-excel",children:"Download Orders"})}),e.jsx(h,{sx:{borderColor:"var(--color-secondary)",backgroundColor:"white",color:"var(--color-secondary)","&:hover":{backgroundColor:"var(--color-secondary)",color:"white"}},onClick:()=>{d()},children:e.jsx(q,{className:"menu-excel",href:"https://firebasestorage.googleapis.com/v0/b/cod-toop-3195b.appspot.com/o/assets%2Fcodtoop%20orders%20template.xlsx?alt=media&token=4ce93c4a-f778-4ee7-a5f3-fff943a652f8 ",download:!0,underline:"none",color:"inherit",children:"Download Template"})})]})]})},Q=({queryFilter:r,setQueryFilter:o,setFilterOpen:l,handleExcelFileUpload:n,downloadExcel:t})=>{const a=()=>{o(c=>({...c.type?{type:c.type}:{}}))};return e.jsxs("div",{className:"datatableTitle",children:[e.jsxs("div",{className:"searchBar",children:[e.jsx(U,{queryFilter:r,setQueryFilter:o}),e.jsx(P,{queryFilter:r,setQueryFilter:o,showAll:!0}),e.jsx(L,{queryFilter:r,setFilterOpen:l,handleClear:a,countColorFilter:1})]}),e.jsxs("div",{className:"buttons",children:[e.jsx(O,{label:"import",handleExcelUpload:n}),e.jsx(J,{downloadExcel:t}),e.jsx(H,{})]})]})},x="- - - - - - ",V=[{field:"id",headerName:s("id"),flex:2,minWidth:130,headerAlign:"center",align:"center",renderCell:r=>e.jsx("div",{className:"cellWithImg",children:r.row.id})},{field:"clientName",headerName:s("client"),flex:2,minWidth:150,headerAlign:"center",align:"center",renderCell:r=>{var o,l;return e.jsx("div",{className:"cellWithImg",children:((l=(o=r.row)==null?void 0:o.client)==null?void 0:l.name)||x})}},{field:"client.phone",headerName:s("phone"),flex:2,minWidth:150,headerAlign:"center",align:"center",renderCell:r=>{var o,l,n,t,a,c,d,m,i;return e.jsx("div",{className:"cellWithImg",children:((n=(l=(o=r==null?void 0:r.row)==null?void 0:o.client)==null?void 0:l.phone)==null?void 0:n.code)===void 0?x:`+${(c=(a=(t=r==null?void 0:r.row)==null?void 0:t.client)==null?void 0:a.phone)==null?void 0:c.code}-${(i=(m=(d=r==null?void 0:r.row)==null?void 0:d.client)==null?void 0:m.phone)==null?void 0:i.number}`})}},{field:"totalPrice",headerName:s("price"),flex:1,minWidth:120,headerAlign:"center",align:"center",renderCell:r=>{var o,l;return e.jsxs("div",{className:"cellWithStatus ",children:[((o=r.row)==null?void 0:o.totalPrice)||x," ",e.jsx("span",{className:"uppercase",style:{color:"#757575",fontWeight:"500"},children:s((l=r.row)==null?void 0:l.currency)})]})}},{field:"currentStatus",headerName:s("status"),flex:2,minWidth:12*16,headerAlign:"center",align:"center",renderCell:r=>e.jsx(_,{status:r.row.currentStatus})},{field:"action",headerName:s("actions"),flex:2,minWidth:100,headerAlign:"center",align:"center",renderCell:r=>e.jsx("span",{className:"cellAction",children:e.jsx(u,{to:r.row._id,style:{textDecoration:"none"},children:e.jsx("span",{className:"capitalize detailsButton",children:s("details")})})})}],ze=()=>{const r=S(y=>y.orderNormalSeller.orderNormalSellers),[o,l]=p.useState(!1),{queryFilter:n,setQueryFilter:t}=$({}),{paginationModel:a,setPaginationModel:c}=B(n,t,C),{downloadExcel:d}=D(),[m,i]=p.useState(!1),{errorMessages:N,showModal:g,handleExcelFileUpload:v,handleConfirmExcelImport:E,handleCloseModal:b}=A(i,G);return W(C),e.jsx("div",{className:"listData",children:e.jsx("div",{className:"listContainer",children:e.jsx("div",{className:"listTable",children:e.jsxs("div",{className:"datatableOrders overflowPreventer",children:[e.jsx(T,{open:g,handleCloseModal:b,errorMessages:N,handleConfirmExcelImport:E,uploadOrders:m}),e.jsx(I,{filterOpen:o,setFilterOpen:l,setQueryFilter:t,queryFilter:n,productType:"seller"}),e.jsx(M,{orders:r,count:r.statusCount,queryFilter:n,setQueryFilter:t}),e.jsx(Q,{queryFilter:n,setQueryFilter:t,setFilterOpen:l,paginationModel:a,handleExcelFileUpload:v,downloadExcel:d}),e.jsx(F,{rows:r.list,columns:V,totalItems:r.totalItems,paginationModel:a,setPaginationModel:c})]})})})})};export{ze as default};
