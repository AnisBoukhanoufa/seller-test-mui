import{ao as D,r as v,j as e,T as A,ap as t,aq as I}from"./index-335be6bc.js";import{A as P,a as C,b as N}from"./auth-button-20129b72.js";import{u as F,F as L}from"./index.esm-6c063bf2.js";import{T as y,a as O}from"./logo-title-b7e3553f.js";import{a as q,b as S,c as R}from"./DialogContent-2da759e4.js";import{D as B}from"./DialogTitle-cffb5590.js";import{D as k}from"./DialogContentText-3425fa31.js";import{u as _}from"./useDispatch-5616ae48.js";import"./Visibility-735ff206.js";import"./TextField-e3426f14.js";import"./useSlot-06d6b379.js";import"./FormControl-0c7a5a9b.js";import"./isMuiElement-28855bcf.js";import"./List-429b0059.js";import"./Grow-32d2c9c3.js";import"./Portal-29f66c29.js";import"./Paper-7bffdec0.js";import"./useControlled-35363894.js";import"./InputAdornment-345b342e.js";function M(){const{t:n}=D(),[i,l]=v.useState({isOpened:!1,message:"",dialogTitle:""}),E=_(),c=F({mode:"onBlur"}),m=()=>{l({...i,isOpened:!1})},w=async o=>{const s=o.email.trim();try{await I(E,{email:s,password:o.password})}catch(a){b(a),console.error("Login failed:",a)}console.log("Form Data:",o)},b=o=>{var p,d,u,x,f,g,h,j,T;const s=o;let a="",r="";((d=(p=s.response)==null?void 0:p.data)==null?void 0:d.message)==="EMAIL_NOT_VERIFIED"?(a="Please check your email inbox and verify your account to continue.",r="Email Verification Required"):((x=(u=s.response)==null?void 0:u.data)==null?void 0:x.message)==="WRONG_CREDENTIAL"?(a="The email or password you entered is incorrect. Please try again.",r="Invalid Credentials"):((g=(f=s.response)==null?void 0:f.data)==null?void 0:g.message)==="your account is not active. Please contact the support team"?(a="Your account is currently inactive. Please contact our support team for assistance.",r="Account Inactive"):(r="Unexpected Error",a="Please try again. If the problem persists, please contact our support team for assistance.",console.error("Login error details:",{status:(h=s.response)==null?void 0:h.status,statusText:(j=s.response)==null?void 0:j.statusText,data:(T=s.response)==null?void 0:T.data,message:s.message})),l({isOpened:!0,message:a,dialogTitle:r})};return e.jsxs(L,{...c,children:[e.jsxs(q,{open:i.isOpened,onClose:m,children:[e.jsx(B,{children:n(i.dialogTitle||"An error occurred.")}),e.jsx(S,{children:e.jsx(k,{children:n(i.message).split(`
`).map((o,s)=>e.jsx("div",{children:o},s))})}),e.jsx(R,{children:e.jsx(A,{onClick:m,children:n("close")})})]}),e.jsxs("form",{className:"flex flex-col  min-h-[466px] justify-between ",onSubmit:c.handleSubmit(w),children:[e.jsxs(t,{className:"pb-4",children:[e.jsx(P,{}),e.jsx(t,{className:"flex flex-col ",children:e.jsxs(t,{className:"flex flex-col gap-4",children:[e.jsx(y,{name:"email",label:"Email",rules:{required:"Email is required",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Enter a valid email address"}}}),e.jsx(y,{name:"password",label:"Password",rules:{required:"Password is required"},type:"password"}),e.jsxs(t,{className:"flex items-center text-[12px] justify-between w-full",children:[e.jsx(t,{}),e.jsx(O,{underline:!1,url:"/forgot-password",children:"forgot password ?"})]})]})})]}),e.jsx(C,{text:"sign in"})]})]})}function ie(){return e.jsx(N,{children:e.jsx(M,{})})}export{ie as default};
