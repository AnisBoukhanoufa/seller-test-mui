import{aO as k,b as i,aP as w,aQ as C,aR as D,f as o,aS as j,s as y,r as g,a8 as $,j as a,aT as A,t as c,aU as q}from"./index-335be6bc.js";import{k as I,e as E,q as T,a as B,b as O,o as R}from"./bahrain-57f02bd3.js";import{c as M}from"./statics-f6863f48.js";import{S as _}from"./Star-b7589792.js";import{q as f}from"./functions-6046b92c.js";import{u as H}from"./useDispatch-5616ae48.js";const U=async(e,t)=>{t(k());try{const s=await i.get(`/product-affiliate/pagination?${e}&visibilityScope=${w.affiliate}`);t(C(s.data))}catch(s){t(D()),o(s,t)}},V=async(e,t)=>{t(j());try{const s=await i.post("/product-affiliate/favorite",e);y(s.data.responseMessage,t)}catch(s){o(s,t)}},W=async(e,t)=>{t(j());try{const s=await i.delete(`/product-affiliate/favorite/${e.productId}`,e);y(s.data.responseMessage,t)}catch(s){o(s,t)}};var z={70:I,71:E,72:T,73:B,74:O,75:R};const Y=({info:e,type:t})=>{var u,n,m,p,x,v,h;const[s,b]=g.useState([]),[F]=$();g.useEffect(()=>{var S;const r=[...new Set((S=e==null?void 0:e.products)==null?void 0:S.flatMap(P=>P.country))];b(r)},[]);const d=(u=e==null?void 0:e.images)==null?void 0:u.filter(r=>!(r!=null&&r.startsWith("NOT_FOUND")))[0],l=H(),N=async()=>{const r={productId:e==null?void 0:e._id};e.isFavorite?await W(r,l):await V(r,l),await U(f(Object.fromEntries(F.entries())),l)};return a.jsx(A,{to:`/products-${t}-seller/${e==null?void 0:e._id}`,style:{textDecoration:"none"},children:a.jsxs("div",{className:`product ${e.isValidated!==!0?"active":"in-active"}`,children:[a.jsx("div",{className:"img-container",style:{backgroundImage:d?`url('${d}')`:"none"}}),a.jsx("div",{className:"info-container",children:a.jsxs("div",{className:"container",children:[a.jsx("div",{className:"title",children:e==null?void 0:e.name}),a.jsx("div",{style:{backgroundColor:`rgba(var(--color-${c(e.currentStatus,{lng:"en"})}-rgb), 1)`},className:`status-tag cellWithStatus capitalize ${c(e==null?void 0:e.currentStatus,{lng:"en"})}`,children:c(e.currentStatus)}),a.jsx(q,{onClick:r=>{r.preventDefault(),N()},sx:{position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",top:"4%",right:"5%",backgroundColor:"#F2F2F2D2",padding:"3px",height:"30px",width:"30px",borderRadius:"50%","&:hover":{backgroundColor:"#D3D3D3"}},children:a.jsx(_,{sx:{color:e.isFavorite?"#FFCD29":"#B3B3B3"}})}),a.jsx("div",{className:"sub-info",children:a.jsxs("div",{children:[a.jsx("div",{className:" price ",children:t==="affiliate"&&a.jsxs("span",{style:{color:"var(--color-main)"},className:"value uppercase",children:[(m=(n=e==null?void 0:e.offers)==null?void 0:n.targetPrice)==null?void 0:m.toFixed(2)," ",c(M[(p=e==null?void 0:e.offers)==null?void 0:p.country])]})}),a.jsx("div",{className:" price ",children:t==="affiliate"&&a.jsx("span",{className:"value dollar",children:(v=(x=e==null?void 0:e.offers)==null?void 0:x.commission)==null?void 0:v.toFixed(2)})}),a.jsx("div",{className:"countries",children:a.jsx("img",{src:z[(h=e==null?void 0:e.offers)==null?void 0:h.country],alt:"",className:"country"})})]})}),a.jsx("div",{})]})})]})})};export{Y as P,U as g};
