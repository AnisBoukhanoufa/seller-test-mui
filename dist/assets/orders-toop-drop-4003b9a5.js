import{r as u,j as e,T as f,t as s,aT as h,ah as j,a8 as k,aK as D,E as T}from"./index-335be6bc.js";import{I as O,u as B,a as S,b as A,c as W,d as I,O as M,W as F,e as P}from"./import-excel-dialog-6a39353d.js";import{D as L}from"./drop-down-order-type-c0d45b22.js";import{F as U}from"./filter-button-group-69656d3d.js";import{M as w}from"./TextField-e3426f14.js";import{M as p}from"./MenuItem-ae06aebb.js";import{S as $,u as K}from"./use-query-filter-82542176.js";import{q as z}from"./functions-6046b92c.js";import{b as G,c as C,d as R}from"./order-toop-drop-calls-efd85b68.js";import{L as q}from"./Link-f99010b1.js";import{u as _}from"./useDispatch-5616ae48.js";import{S as H}from"./status-cell-abbf33fa.js";import"./DataGrid-b5ad00e6.js";import"./Divider-88aee12a.js";import"./Autocomplete-7da48e1d.js";import"./Close-a8700400.js";import"./useSlot-06d6b379.js";import"./Popper-6a651f11.js";import"./Grow-32d2c9c3.js";import"./Portal-29f66c29.js";import"./Paper-7bffdec0.js";import"./useControlled-35363894.js";import"./ClickAwayListener-9b9a333f.js";import"./List-429b0059.js";import"./ListItemText-666b43be.js";import"./listItemTextClasses-c15af42f.js";import"./Checkbox-863386b3.js";import"./SwitchBase-6ca860c4.js";import"./FormControl-0c7a5a9b.js";import"./isMuiElement-28855bcf.js";import"./InputAdornment-345b342e.js";import"./Tooltip-0185c911.js";import"./TableCell-077dec01.js";import"./FormControlLabel-c815a521.js";import"./getThemeProps-e55d9c99.js";import"./validator-9e88d0aa.js";import"./statics-f6863f48.js";import"./products-autocomplete-4bf85a69.js";import"./sub-products-autocomplete-87ffbeaf.js";import"./use-product-sub-product-filter-4ba22b99.js";import"./moment-fbc5633a.js";import"./DialogContent-2da759e4.js";import"./DialogTitle-cffb5590.js";import"./KeyboardArrowDown-7229c3ca.js";import"./ButtonGroup-59079b0e.js";const J=()=>{const[o,r]=u.useState(null),t=!!o,n=a=>{r(a.currentTarget)},l=()=>{r(null)};return e.jsxs("div",{children:[e.jsx(f,{variant:"outlined",className:"secondary-button",onClick:n,children:e.jsx("span",{className:"capitalize",children:s("new")})}),e.jsxs(w,{className:"new-list",anchorEl:o,open:t,onClose:l,children:[e.jsx(p,{sx:{borderColor:"var(--color-secondary)",backgroundColor:"white",borderBottom:"1px solid #E6E6E6",color:"var(--color-secondary)","&:hover":{backgroundColor:"var(--color-secondary)",color:"white"}},onClick:()=>l(),children:e.jsx(h,{to:"/orders-toop-drop/new?country=local",className:"link",children:s("local order")})}),e.jsx(p,{sx:{borderColor:"var(--color-secondary)",backgroundColor:"white",color:"var(--color-secondary)","&:hover":{backgroundColor:"var(--color-secondary)",color:"white"}},onClick:l,children:e.jsx(h,{to:`/orders-toop-drop/new?country=${j.KSA}`,className:"link",children:s("international from KSA")})}),e.jsx(p,{sx:{borderColor:"var(--color-secondary)",backgroundColor:"white",color:"var(--color-secondary)","&:hover":{backgroundColor:"var(--color-secondary)",color:"white"}},onClick:l,children:e.jsx(h,{to:`/orders-toop-drop/new?country=${j.UAE}`,className:"link",children:s("international from UAE")})})]})]})},Q=({downloadExcel:o})=>{const r=_(),[t,n]=u.useState(null),l=!!t,[a]=k(),d=i=>{n(i.currentTarget)},c=()=>{n(null)},m=async()=>{const i=await G(z(Object.fromEntries(a.entries())),r);console.log(i),o(i.data.list),c()};return e.jsxs("div",{children:[e.jsx(f,{variant:"outlined",className:"xls-button",onClick:d,children:"Excel"}),e.jsxs(w,{className:"new-list",anchorEl:t,open:l,onClose:c,children:[e.jsx(p,{sx:{borderColor:"var(--color-secondary)",backgroundColor:"white",borderBottom:"1px solid #E6E6E6",color:"var(--color-secondary)","&:hover":{backgroundColor:"var(--color-secondary)",color:"white"}},onClick:()=>{m()},children:e.jsx("span",{className:"menu-excel",children:"Download Orders"})}),e.jsx(p,{sx:{borderColor:"var(--color-secondary)",backgroundColor:"white",color:"var(--color-secondary)","&:hover":{backgroundColor:"var(--color-secondary)",color:"white"}},onClick:()=>{c()},children:e.jsx(q,{className:"menu-excel",href:"https://firebasestorage.googleapis.com/v0/b/cod-toop-3195b.appspot.com/o/assets%2Fcodtoop%20orders%20template.xlsx?alt=media&token=4ce93c4a-f778-4ee7-a5f3-fff943a652f8 ",download:!0,underline:"none",color:"inherit",children:"Download Template"})})]})]})},V=({queryFilter:o,setQueryFilter:r,paginationModel:t,setFilterOpen:n,handleExcelFileUpload:l,downloadExcel:a})=>{const d=()=>{r(c=>({type:c.type}))};return e.jsxs("div",{className:"datatableTitle",children:[e.jsxs("div",{className:"searchBar",children:[e.jsx($,{queryFilter:o,setQueryFilter:r}),e.jsx(L,{queryFilter:o,setQueryFilter:r,showAll:!0}),e.jsx(U,{queryFilter:o,setFilterOpen:n,handleClear:d,countColorFilter:1})]}),e.jsxs("div",{className:"buttons",children:[e.jsx(O,{label:"import",handleExcelUpload:l}),e.jsx(Q,{downloadExcel:a}),e.jsx(J,{})]})]})},x="- - - - - - ",X=[{field:"id",headerName:s("id"),flex:2,minWidth:130,headerAlign:"center",align:"center",renderCell:o=>e.jsx("div",{className:"cellWithImg",children:o.row.id})},{field:"clientName",headerName:s("client"),flex:2,minWidth:150,headerAlign:"center",align:"center",renderCell:o=>{var r,t;return e.jsx("div",{className:"cellWithImg",children:((t=(r=o.row)==null?void 0:r.client)==null?void 0:t.name)||x})}},{field:"client.phone",headerName:s("phone"),flex:2,minWidth:150,headerAlign:"center",align:"center",renderCell:o=>{var r,t,n,l,a,d,c,m,i;return e.jsx("div",{className:"cellWithImg",children:((n=(t=(r=o==null?void 0:o.row)==null?void 0:r.client)==null?void 0:t.phone)==null?void 0:n.code)===void 0?x:`+${(d=(a=(l=o==null?void 0:o.row)==null?void 0:l.client)==null?void 0:a.phone)==null?void 0:d.code}-${(i=(m=(c=o==null?void 0:o.row)==null?void 0:c.client)==null?void 0:m.phone)==null?void 0:i.number}`})}},{field:"totalPrice",headerName:s("price"),flex:1,minWidth:120,headerAlign:"center",align:"center",renderCell:o=>{var r,t;return e.jsxs("div",{className:"cellWithStatus ",children:[((r=o.row)==null?void 0:r.totalPrice)||x," ",e.jsx("span",{className:"uppercase",style:{color:"#757575",fontWeight:"500"},children:s((t=o.row)==null?void 0:t.currency)})]})}},{field:"currentStatus",headerName:s("status"),flex:2,minWidth:12*16,headerAlign:"center",align:"center",renderCell:o=>e.jsx(H,{status:o.row.currentStatus})},{field:"action",headerName:s("actions"),flex:2,minWidth:100,headerAlign:"center",align:"center",renderCell:o=>e.jsx("div",{className:"cellAction",children:e.jsx(h,{to:o.row._id,style:{textDecoration:"none"},children:e.jsx("span",{className:"capitalize detailsButton",children:s("details")})})})}],Ge=()=>{const o=D(y=>y.orderToopDrop.ordersToopDrop),[r,t]=u.useState(!1),{queryFilter:n,setQueryFilter:l}=K({}),{paginationModel:a,setPaginationModel:d}=B(n,l,C),{downloadExcel:c}=S(),[m,i]=u.useState(!1),{errorMessages:g,showModal:v,handleExcelFileUpload:E,handleConfirmExcelImport:N,handleCloseModal:b}=A(i,R);return W(C),e.jsx("div",{className:"listData",children:e.jsx("div",{className:"listContainer",children:e.jsx("div",{className:"listTable",children:e.jsxs("div",{className:"datatableOrders overflowPreventer",children:[e.jsx(I,{open:v,handleCloseModal:b,errorMessages:g,handleConfirmExcelImport:N,uploadOrders:m}),e.jsx(M,{filterOpen:r,setFilterOpen:t,setQueryFilter:l,queryFilter:n,sellerType:T.seller,productType:"toopDrop"}),e.jsx(F,{orders:o,count:o.statusCount,queryFilter:n,setQueryFilter:l}),e.jsx(V,{paginationModel:a,queryFilter:n,setQueryFilter:l,setFilterOpen:t,handleExcelFileUpload:E,downloadExcel:c}),e.jsx(P,{rows:o.list,columns:X,totalItems:o.totalItems,paginationModel:a,setPaginationModel:d})]})})})})};export{Ge as default};
