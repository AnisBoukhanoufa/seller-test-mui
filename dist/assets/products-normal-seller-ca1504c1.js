import{j as e,t as u,aT as b,a8 as j,c as v,T as S,bo as l,bx as y,aK as h,r as d}from"./index-335be6bc.js";import{g as P}from"./product-normal-seller-calls-a58909a0.js";import{D as w}from"./DataGrid-b5ad00e6.js";import{B as C}from"./ButtonGroup-59079b0e.js";import{u as z}from"./useDispatch-5616ae48.js";import{S as M,u as D}from"./use-query-filter-82542176.js";import{P as O}from"./Star-b7589792.js";import{P as A}from"./product-21193570.js";import{q as E}from"./functions-6046b92c.js";import"./Divider-88aee12a.js";import"./MenuItem-ae06aebb.js";import"./List-429b0059.js";import"./listItemTextClasses-c15af42f.js";import"./TextField-e3426f14.js";import"./useSlot-06d6b379.js";import"./FormControl-0c7a5a9b.js";import"./isMuiElement-28855bcf.js";import"./Grow-32d2c9c3.js";import"./Portal-29f66c29.js";import"./Paper-7bffdec0.js";import"./useControlled-35363894.js";import"./Autocomplete-7da48e1d.js";import"./Close-a8700400.js";import"./Popper-6a651f11.js";import"./ClickAwayListener-9b9a333f.js";import"./ListItemText-666b43be.js";import"./Checkbox-863386b3.js";import"./SwitchBase-6ca860c4.js";import"./InputAdornment-345b342e.js";import"./Tooltip-0185c911.js";import"./TableCell-077dec01.js";import"./FormControlLabel-c815a521.js";import"./getThemeProps-e55d9c99.js";import"./bahrain-57f02bd3.js";import"./statics-f6863f48.js";import"./moment-fbc5633a.js";const T=[{field:"id",headerName:"ID",flex:2,minWidth:130,headerAlign:"center",align:"center"},{field:"name",headerName:"Name",flex:2,minWidth:170,headerAlign:"center",align:"center",renderCell:t=>e.jsx("div",{className:"product-name",children:`${t.row.name}`})},{field:"status",headerName:"status",flex:1,minWidth:140,headerAlign:"center",align:"center",type:"singleSelect",renderCell:t=>e.jsx("span",{className:`cellWithStatus ${u(`${t.row.currentStatus}`,{lng:"en"})}`,children:u(`${t.row.currentStatus}`)})}],B=[{field:"action",headerName:"Actions",flex:1,minWidth:140,headerAlign:"center",align:"center",renderCell:t=>e.jsx("span",{className:"cellAction",children:e.jsx(b,{to:t.row._id,style:{textDecoration:"none"},children:e.jsx("span",{className:"detailsButton",children:u("details")})})})}],I=({products:t,paginationModel:a,setPaginationModel:s})=>{const[o,r]=j(),n=T.map(i=>({...i,headerName:u(i.headerName)})).concat(B);return e.jsx(w,{autoHeight:!0,sx:{root:{"& .MuiDataGrid-columnsContainer":{direction:"ltr"},"& .MuiDataGrid-virtualScroller":{direction:"ltr"}}},rows:t.list,columns:n,getRowId:i=>i._id,initialState:{pagination:{paginationModel:{pageSize:10}}},pageSizeOptions:[10,25,50],checkboxSelection:!0,disableRowSelectionOnClick:!0,rowCount:t.totalItems,pagination:!0,paginationModel:a,paginationMode:"server",onPaginationModelChange:i=>{s(i),r(c=>({...Object.fromEntries(Array.from(c.entries())),...i}))}})};const F=v(e.jsx("path",{d:"M4 8h4V4H4zm6 12h4v-4h-4zm-6 0h4v-4H4zm0-6h4v-4H4zm6 0h4v-4h-4zm6-10v4h4V4zm-6 4h4V4h-4zm6 6h4v-4h-4zm0 6h4v-4h-4z"}),"Apps"),k=v(e.jsx("path",{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5m0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5m0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5M7 19h14v-2H7zm0-6h14v-2H7zm0-8v2h14V5z"}),"FormatListBulleted"),H=({displayMode:t=l.table,changeDisplayMode:a})=>{const s=z();return e.jsxs(C,{variant:"outlined","aria-label":"outlined button group",className:"button-grp-display",children:[e.jsx(S,{className:t===l.cards?"checked":"",onClick:()=>{s(a(l.cards))},children:e.jsx(F,{sx:{fontSize:"1.7em"}})}),e.jsx(S,{className:t===l.table?"checked":"",onClick:()=>{s(a(l.table))},children:e.jsx(k,{sx:{fontSize:"1.7em"}})})]})},G=({queryFilter:t,setQueryFilter:a,displayMode:s})=>e.jsxs("div",{className:"datatableTitle",children:[e.jsx("div",{className:"searchBar",children:e.jsx(M,{queryFilter:t,setQueryFilter:a})}),e.jsxs("span",{style:{display:"flex",gap:"20px"},children:[e.jsx(H,{displayMode:s,changeDisplayMode:y}),e.jsx(b,{to:"/products-normal-seller/new",className:"secondary-button",children:u("new")})]})]}),L=({numberOfTotalProducts:t,numberOfCardsToShow:a,paginationModel:s,setPaginationModel:o,products:r})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"container-products",children:r==null?void 0:r.list.map(n=>e.jsx(A,{info:n,type:"normal"},n.id))}),e.jsx(O,{numberOfTotalProducts:t,numberOfCardsToShow:a,paginationModel:s,setPaginationModel:o})]}),x=(t,a,s)=>{let o;s===l.cards?o=[50].includes(Number(t))?Number(t):50:o=[10,25,50].includes(Number(t))?Number(t):10;const r=Number.isInteger(Number(a))?Number(a):0;return{pageSize:o,page:r}},N=(t,a,s)=>{const o=[10,25,50];return Number.isInteger(Number(a))?s===l.cards&&Number(t)===50?!0:!!o.includes(Number(t)):!1},q=(t,a)=>{const o=z(),[r,n]=j(),i=h(m=>m.productNormalSeller.displayMode)||l.table,[c,p]=d.useState(x(r.get("pageSize"),r.get("page"),i));d.useEffect(()=>{if(i===l.cards&&Number(r.get("pageSize")||0)!==50){const m={page:Math.floor(c.page*c.pageSize/50),pageSize:50};p(m),n(f=>({...Object.fromEntries(Array.from(f.entries())),...m}),{replace:!0})}},[i]);const g=d.useRef(!0);return d.useEffect(()=>{g.current?g.current=!1:p(m=>({pageSize:m.pageSize,page:0}))},[JSON.stringify(t)]),d.useEffect(()=>{N(r.get("pageSize"),r.get("page"),i)||n(m=>({...Object.fromEntries(Array.from(m.entries())),...x(r.get("pageSize"),r.get("page"),i)}),{replace:!0})},[r,n]),d.useEffect(()=>{(async()=>{try{N(r.get("pageSize"),r.get("page"),i)&&await a(E(Object.fromEntries(r.entries())),o)}catch{throw new Error("error fetching data")}})()},[r,o,n,a]),{paginationModel:c,setPaginationModel:p}},ye=()=>{const a=h(c=>c.productNormalSeller.productNormalSellers)||[],s=h(c=>c.productNormalSeller.displayMode)||l.table,{queryFilter:o,setQueryFilter:r}=D(),{paginationModel:n,setPaginationModel:i}=q(o,P);return e.jsx("div",{className:"listProductNormal",children:e.jsx("div",{className:"listContainer",children:e.jsx("div",{className:"listTable",children:e.jsxs("div",{className:"products datatableProducts overflowPreventer",children:[e.jsx(G,{displayMode:s,queryFilter:o,setQueryFilter:r}),s===l.table&&e.jsx(I,{products:a,paginationModel:n,setPaginationModel:i}),s===l.cards&&e.jsx(L,{paginationModel:n,setPaginationModel:i,products:a,numberOfCardsToShow:50,numberOfTotalProducts:a.totalItems})]})})})})};export{ye as default};
