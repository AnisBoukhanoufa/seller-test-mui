import{ao as b,ar as j,u as S,r as n,j as s,T as y,ap as p}from"./index-335be6bc.js";import{A as T,a as k,b as v}from"./auth-button-20129b72.js";import{u as C,F as D}from"./index.esm-6c063bf2.js";import{T as f}from"./logo-title-b7e3553f.js";import{a as R}from"./auth-calls-d335705c.js";import{a as F,b as q,c as A}from"./DialogContent-2da759e4.js";import{D as O}from"./DialogTitle-cffb5590.js";import{D as L}from"./DialogContentText-3425fa31.js";import"./Visibility-735ff206.js";import"./TextField-e3426f14.js";import"./useSlot-06d6b379.js";import"./FormControl-0c7a5a9b.js";import"./isMuiElement-28855bcf.js";import"./List-429b0059.js";import"./Grow-32d2c9c3.js";import"./Portal-29f66c29.js";import"./Paper-7bffdec0.js";import"./useControlled-35363894.js";import"./InputAdornment-345b342e.js";function N(){const{t:o}=b(),g=j(),l=S(),i=C({mode:"onBlur"}),[d,c]=n.useState(!1),[u,w]=n.useState(null),[a,r]=n.useState({isOpen:!1,title:"",message:"",isSuccess:!1}),h=i.watch("password");n.useEffect(()=>{const e=new URLSearchParams(l.search).get("token");e?w(e):r({isOpen:!0,title:"Invalid Reset Link",message:"The password reset link is invalid or has expired. Please request a new password reset link.",isSuccess:!1})},[l.search]);const m=()=>{r({...a,isOpen:!1}),a.isSuccess&&g("/sign-in")},x=async t=>{try{if(!u){r({isOpen:!0,title:"Missing Token",message:"No reset token found. Please use the link from your email.",isSuccess:!1});return}c(!0);const e=t.password;await R({token:u,password:e}),r({isOpen:!0,title:"Password Reset Successful",message:"Your password has been successfully reset. You can now sign in with your new password.",isSuccess:!0}),i.reset()}catch{r({isOpen:!0,title:"Password Reset Failed",message:"There was an issue resetting your password. Please try again. If the problem persists, please contact our support team.",isSuccess:!1})}finally{c(!1)}};return s.jsxs(D,{...i,children:[s.jsxs(F,{open:a.isOpen,onClose:m,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[s.jsx(O,{id:"alert-dialog-title",children:o(a.title)}),s.jsx(q,{children:s.jsx(L,{id:"alert-dialog-description",children:o(a.message).split(`
`).map((t,e)=>s.jsx("div",{children:t},e))})}),s.jsx(A,{children:s.jsx(y,{onClick:m,color:"primary",autoFocus:!0,children:a.isSuccess?o("Go to Sign In"):o("Close")})})]}),s.jsxs("form",{className:"flex flex-col min-h-[466px] justify-between gap-8",onSubmit:i.handleSubmit(x),children:[s.jsxs(p,{className:"pb-4",children:[s.jsx(T,{title:"reset password",subtitle:"please enter your new password."}),s.jsxs(p,{className:"flex flex-col gap-4 justify-between",children:[s.jsx(f,{name:"password",label:"Password",rules:{required:"Password is required",minLength:{value:8,message:"Password must be at least 8 characters long"},pattern:{value:/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d@$!%*?&]{8,}$/,message:"Password must contain at least one letter, one number, and be at least 8 characters long"}},type:"password"}),s.jsx(f,{name:"confirmPassword",label:"Confirm Password",rules:{required:"Confirm Password is required",validate:t=>t===h||"Passwords do not match"},type:"password"})]})]}),s.jsx(k,{disabled:d,text:d?"Resetting...":"Reset Password"})]})]})}function es(){return s.jsx(v,{children:s.jsx(N,{})})}export{es as default};
